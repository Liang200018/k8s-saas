<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lzy.k8s.saas.infra.repo.mapper.K8sSaasAccountMapper">


    <!--    根据user_id查询账户-->
    <select id="findByUserName" parameterType="String" resultType="com.lzy.k8s.saas.infra.param.K8sSaasAccountInfo">
        select
            user_id      AS userId
            ,user_name  AS userName
            ,phone
            ,password
            ,status
            ,register_time AS registerTime
            ,latest_login_time AS latestLoginTime
        from biz_center.saas_accounts
        where user_name=#{user_name}
    </select>


    <insert id="insertAccount" useGeneratedKeys="true" keyProperty="userId" parameterType="com.lzy.k8s.saas.infra.param.K8sSaasAccountInfo">
        insert into biz_center.saas_accounts(
            user_id
            ,user_name
            ,phone
            ,password
            ,status
            ,register_time
            ,latest_login_time
        )
        values(
            #{userId}
            ,#{userName}
            ,#{phone}
            ,#{password}
            ,#{status}
            ,#{registerTime}
            ,#{latestLoginTime}
        )
    </insert>

    <update id="updateAccount" parameterType="com.lzy.k8s.saas.infra.param.K8sSaasAccountInfo">
        update biz_center.saas_accounts
        set
            user_id=#{userId}
            ,user_name=#{userName}
            ,phone=#{phone}
            ,password=#{password}
            ,status=#{status}
            ,register_time=#{registerTime}
            ,latest_login_time = #{latestLoginTime}
        where user_name=#{userName}
        and phone=#{phone}
        and password=#{password}
    </update>
</mapper>